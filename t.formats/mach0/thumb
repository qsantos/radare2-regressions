#!/bin/sh
# GPL 3+ - Copyright (C) 2015  pancake

. $(git rev-parse --show-toplevel)/tests.sh

NAME='mach0 thumb entrypoint bits'
BROKEN=
FILE=../../bins/mach0/thumb-test
ARGS=
CMDS='e asm.bits
'
EXPECT='16
'
run_test

NAME='mach0 thumb entrypoint info'
BROKEN=
FILE=../../bins/mach0/thumb-test
ARGS=
CMDS='ie~vaddr
'
EXPECT='vaddr=0x0000bfa4 paddr=0x00007fa5 baddr=0x00003fff laddr=0x00000000
'
run_test

NAME='mach0 non-thumb symbol on thumb bin'
BROKEN=
FILE=../../bins/mach0/thumb-test
ARGS=
CMDS='pi 1@ sym.imp.strcmp
'
EXPECT='ldr pc, [pc, -4]
'
run_test
